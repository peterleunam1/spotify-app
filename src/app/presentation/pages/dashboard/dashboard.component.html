<app-main-layout>
  <app-navbar [isSearchVisible]="false"></app-navbar>

  <div class="px-6 py-4 text-white min-h-screen">
    <!-- ðŸ”¥ TÃ­tulo -->
    <h2 class="text-2xl md:text-3xl font-bold mb-6">My Playlists</h2>

    <!-- ðŸ”„ Estado de carga -->
    <div
      *ngIf="isLoading"
      class="text-center text-lg font-semibold animate-pulse">
      Cargando playlists...
    </div>

    <!-- ðŸŽµ Grid de playlists -->
    <div
      *ngIf="!isLoading && playlists.items.length > 0"
      class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6">
      <div
        *ngFor="let playlist of playlists.items"
        (click)="openPlaylist(playlist.external_urls.spotify)"
        class="bg-[#181818] w-54 shadow-md rounded-lg p-4 transition-transform transform duration-300 hover:scale-105 hover:shadow-xl hover:bg-[#282828] cursor-pointer flex flex-col">
        <!-- ðŸ“Œ Imagen de la Playlist -->
        <div class="relative w-full h-52">
          <img
            [src]="playlist.images[0].url || 'assets/placeholder.png'"
            [alt]="playlist.name"
            class="w-full h-full object-cover rounded-md" />
        </div>

        <!-- ðŸ“Œ Info de la Playlist -->
        <div class="flex flex-col items-center justify-center text-center mt-2">
          <h3 class="text-sm font-bold text-white truncate w-full px-2">
            {{ playlist.name }}
          </h3>
          <p class="text-xs text-gray-400 truncate w-full px-2">
            {{ playlist.owner.display_name }}
          </p>
        </div>

        <!-- âœ… BotÃ³n Follow/Unfollow -->
        <button
          (click)="toggleFollow(playlist.id); $event.stopPropagation()"
          class="cursor-pointer absolute top-3 right-3 px-3 py-1 text-xs md:text-sm font-bold rounded-full transition duration-300"
          [ngClass]="
            isFollowed(playlist.id)
              ? 'bg-green-500 text-black hover:bg-green-400'
              : 'bg-gray-700 text-white hover:bg-gray-600'
          ">
          {{ isFollowed(playlist.id) ? 'Unfollow' : 'Follow' }}
        </button>
      </div>
    </div>

    <!-- ðŸš« Sin playlists -->
    <div
      *ngIf="!isLoading && playlists.items?.length === 0"
      class="text-center text-lg text-gray-400 mt-6">
      No playlists available.
    </div>
  </div>
</app-main-layout>
