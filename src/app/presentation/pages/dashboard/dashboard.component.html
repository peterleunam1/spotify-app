<app-main-layout>
  <app-navbar [isSearchVisible]="false"></app-navbar>

  <div class="p-6 text-white">
    <h2 class="text-2xl font-bold mb-6">Mis Playlists</h2>

    <!-- Estado de carga -->
    <div *ngIf="isLoading" class="text-center text-lg font-semibold">Cargando playlists...</div>

    <!-- Grid de playlists -->
    <div *ngIf="!isLoading && playlists.items.length > 0" 
         class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6">
      
      <div *ngFor="let playlist of playlists.items"
           class="bg-gray-800 rounded-lg p-4 cursor-pointer transform transition duration-300 hover:scale-105 hover:shadow-lg relative"
           (click)="openPlaylist(playlist.external_urls.spotify)">
        
        <!-- Imagen de la playlist -->
        <div class="relative overflow-hidden rounded-lg">
          <img [src]="playlist.images[0].url || 'assets/placeholder.png'" 
               [alt]="playlist.name" 
               class="w-full rounded-lg transition duration-300 hover:brightness-75">
        </div>

        <!-- Información de la playlist -->
        <div class="mt-3 text-center">
          <h3 class="text-sm font-bold truncate">{{ playlist.name }}</h3>
          <p class="text-xs text-gray-400 truncate">{{ playlist.owner.display_name }}</p>
        </div>

        <!-- Botón de Follow/Unfollow -->
        <button (click)="toggleFollow(playlist.id); $event.stopPropagation()"
                class="absolute top-2 right-2 px-3 py-1 text-xs font-bold rounded-full transition 
                       duration-300"
                [ngClass]="isFollowed(playlist.id) 
                          ? 'bg-green-500 text-black hover:bg-green-400' 
                          : 'bg-gray-700 text-white hover:bg-gray-600'">
          {{ isFollowed(playlist.id) ? 'Unfollow' : 'Follow' }}
        </button>
      </div>
    </div>

    <!-- Sin playlists -->
    <div *ngIf="!isLoading && playlists.items?.length === 0" class="text-center text-lg mt-6">
      No hay playlists disponibles.
    </div>
  </div>
</app-main-layout>
